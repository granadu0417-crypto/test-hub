{{ define "head" }}
<style>
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
    }

    main {
        padding-bottom: 60px;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }
</style>
{{ end }}

{{ define "main" }}
<div class="container">
    <!-- Test Introduction -->
    {{ partial "test-intro.html" . }}

    <!-- Test Content (Questions & Results) -->
    {{ partial "test-content.html" . }}

    <!-- Share Buttons -->
    {{ partial "share-buttons.html" . }}
</div>
{{ end }}

{{ define "scripts" }}
<script src="/js/test-stats.js"></script>
<script>
    // Test Data (from front matter)
    const testData = {{ dict "id" .File.BaseFileName "title" .Title "questions" .Params.questions "results" .Params.results | jsonify | safeJS }};

    // Initialize test engine
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize test stats
        const stats = new TestStats(testData.id);
        stats.display('testCount');
        // Optional: 실시간 업데이트 (3초마다 1~3명 증가하는 효과)
        // stats.startRealtimeUpdate('testCount', 3000);

        // Initialize test counter (기존 함수)
        if (typeof incrementTestCounter !== 'undefined') {
            incrementTestCounter(testData.id);
        }

        // Initialize test engine
        initTest(testData);
    });
</script>
{{ end }}
