{{ $isFortuneSection := or (eq .Section "fortune") (hasPrefix .RelPermalink "/fortune/") }}

<header style="background: linear-gradient(135deg, {{ if $isFortuneSection }}#1e1b4b 0%, #312e81 100%{{ else }}#667eea 0%, #764ba2 100%{{ end }}); padding: 48px 20px 20px 20px; text-align: center; color: white; box-shadow: 0 8px 32px rgba(102, 126, 234, 0.15); transition: background 0.5s ease;">
    <div class="container" style="max-width: 1200px; margin: 0 auto;">
        <!-- Logo/Title -->
        <h1 style="font-size: 2.2rem; margin: 0 0 12px 0; font-weight: 800; letter-spacing: -0.02em;">
            <a href="/" style="color: white; text-decoration: none;">
                ğŸ”® ë‚˜í…ŒìŠ¤íŠ¸
            </a>
        </h1>

        <p style="font-size: 1.15rem; margin: 0 0 24px 0; opacity: 0.95; font-weight: 400;">
            {{ if $isFortuneSection }}ì˜¤ëŠ˜ì˜ ìš´ì„¸ì™€ ë¯¸ë˜ë¥¼ í™•ì¸í•˜ì„¸ìš”{{ else }}{{ .Site.Params.description }}{{ end }}
        </p>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="main-tabs" style="display: flex; justify-content: center; gap: 12px; margin-bottom: 20px;">
            <a href="/" class="tab-link {{ if not $isFortuneSection }}active{{ end }}" style="padding: 12px 32px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 1.05rem; transition: all 0.3s ease; {{ if not $isFortuneSection }}background: rgba(255,255,255,0.25); color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.15);{{ else }}background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.7);{{ end }}">
                ğŸ¯ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸
            </a>
            <a href="/fortune/" class="tab-link {{ if $isFortuneSection }}active{{ end }}" style="padding: 12px 32px; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 1.05rem; transition: all 0.3s ease; {{ if $isFortuneSection }}background: rgba(251,191,36,0.25); color: #fbbf24; box-shadow: 0 4px 12px rgba(251,191,36,0.3);{{ else }}background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.7);{{ end }}">
                ğŸŒ™ ìš´ì„¸
            </a>
        </nav>

        <!-- Usage Counter -->
        <div class="usage-counter">
            <div class="label">ëˆ„ì  ì°¸ì—¬ì</div>
            <div class="count"><span id="usageCount">0</span>ëª…</div>
        </div>

        <!-- Navigation (if not on home page) -->
        {{ if not .IsHome }}
        <nav style="margin-top: 20px;">
            <a href="/" style="color: white; text-decoration: none; padding: 10px 20px; background: rgba(255,255,255,0.2); border-radius: 25px; display: inline-block; transition: all 0.3s ease;">
                â† ì „ì²´ í…ŒìŠ¤íŠ¸ ë³´ê¸°
            </a>
        </nav>
        {{ end }}
    </div>

    <!-- Usage Counter Script -->
    <script>
        (function() {
            const storageKey = 'test_hub_usage_count';
            const baseCount = 50000; // ê¸°ë³¸ ì‹œì‘ ìˆ«ì
            let currentCount = parseInt(localStorage.getItem(storageKey)) || baseCount;

            currentCount++;
            localStorage.setItem(storageKey, currentCount);

            const countElement = document.getElementById('usageCount');
            if (countElement) {
                // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                let displayCount = currentCount - 50;
                const increment = Math.ceil(50 / 20); // 20ë‹¨ê³„ë¡œ ë‚˜ëˆ”

                const timer = setInterval(() => {
                    displayCount += increment;
                    if (displayCount >= currentCount) {
                        displayCount = currentCount;
                        clearInterval(timer);
                    }
                    countElement.textContent = displayCount.toLocaleString();
                }, 30);
            }
        })();
    </script>
</header>
